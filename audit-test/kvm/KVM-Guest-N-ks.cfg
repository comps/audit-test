# Kickstart file automatically generated by anaconda.

install
cdrom
key --skip
lang en_US.UTF-8
keyboard us
services --enabled=nfs,sshd
skipx
text
network --bootproto=static --device=eth0 --ip={network_ip} --gateway={network_gateway} --nameserver={network_nameserver} --netmask={network_netmask}
rootpw {rootpw}
firewall --disabled
authconfig --enableshadow --enablemd5
selinux --enforcing
timezone --utc America/New_York
bootloader --location=mbr --append="rhgb quiet"
# The following is the partition information you requested
# Note that any partitions you deleted are not expressed
# here so unless you clear all partitions first, this is
# not guaranteed to work
%include /tmp/part-include
poweroff

%packages
@base
@core

%pre
#!/usr/bin/env bash

for i in $(find /dev -regex '^/dev/\(hd\|sd\|vd\|xvd\)[a-z]+$' -print | sort); do
	dev=$(basename $i)
	echo "clearpart --all --drives=$dev --initlabel" > /tmp/part-include
	echo "zerombr" >> /tmp/part-include
	echo "part /boot --fstype ext3 --size=100 --ondisk=$dev" >> /tmp/part-include
	echo "part pv.1 --size=1 --grow --ondisk=$dev" >> /tmp/part-include
	echo "volgroup VolGroup00 --pesize=32768 pv.1" >> /tmp/part-include
	echo "logvol swap --fstype swap --name=LogVol01 --vgname=VolGroup00 --size=1000 --grow --maxsize=2048" >> /tmp/part-include
	echo "logvol / --fstype ext3 --name=LogVol00 --vgname=VolGroup00 --size=1024 --grow" >> /tmp/part-include
	break
done

%end
