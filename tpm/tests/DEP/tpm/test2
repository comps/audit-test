###############################################################################
# (c) Copyright Hewlett-Packard Development Company, L.P., 2006
#
#   This program is free software: you can redistribute it and/or modify
#   it under the terms of version 2 the GNU General Public License as
#   published by the Free Software Foundation.
#
#   This program is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#   GNU General Public License for more details.
#
#   You should have received a copy of the GNU General Public License
#   along with this program.  If not, see <http://www.gnu.org/licenses/>.
###############################################################################

Test2 ()
{
	[ "$IDFLAG" ] && {
		echo "Test2 - Tspi_TPM_TakeOwnership01"
		return 0
	}

	echo
	echo -n "T2: Taking ownership of TPM..."
	$TESTPATH/init/Tspi_TPM_TakeOwnership01 $VERSION 2>>eout >>sout
	case "$?" in
	0 )
		echo "successful."
		return 0
		;;
	7 )
		#
		# Code 7 from this test means that the TPM has been
		# activated in BIOS, but is not enabled to communicate
		# with software.
		#
		echo "not enabled."
		echo "-> Please make sure the TPM has been 'enabled' in BIOS."
		return 7
		;;
	8 )
		echo "owner already installed."
		;;
	* )
		echo "Failed($ESTAT)."
		echo "-> Check `pwd`/eout for details"
		;;
	esac

	return 1
}
