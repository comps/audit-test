###############################################################################
# (c) Copyright Hewlett-Packard Development Company, L.P., 2006
#
#   This program is free software: you can redistribute it and/or modify
#   it under the terms of version 2 the GNU General Public License as
#   published by the Free Software Foundation.
#
#   This program is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#   GNU General Public License for more details.
#
#   You should have received a copy of the GNU General Public License
#   along with this program.  If not, see <http://www.gnu.org/licenses/>.
###############################################################################

#
# This command loads a delegate table row blob into a non-volatile
# delegate table in the TPM. Tspi_TPM_Delegate_CacheOwnerDelegation
# can be used during manufacturing or on first boot (when no Owner
# is installed), or after an Owner is installed. If an Owner is
# installed, Tspi_TPM_Delegate_CacheOwnerDelegation requires Owner
# authorization.
#
Test9 ()
{
	[ "$IDFLAG" ] && {
		echo "Test9 - Tspi_TPM_Delegate_CacheOwnerDelegation01"
		return 0
	}

	echo
	echo -n "T9: Test loading delegate table row..."
	$TESTPATH/tpm/Tspi_TPM_Delegate_CacheOwnerDelegation01 $VERSION 2>>eout >>sout
	case "$?" in
	0 )
		echo "successful."
		return 0
		;;
	* )
		echo "Failed($ESTAT)."
		echo "-> Check `pwd`/eout for details"
		;;
	esac

	return 1
}
